<!DOCTYPE html>
<meta charset="utf-8">
<svg width="960" height="600"></svg>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script>
var svg = d3.select("svg")
var width = svg.attr("width")
var height = svg.attr("height")

// returns a random int between [min, max]
function getRandomInt(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
}

// create circles at random positions
// d3.range(50) = ints from 0 - 49
// centers (x, y) can be between [radius, width - radius]
num_circles = 50;
radius = 20;
var circle_data = d3.range(num_circles).map(function() {
    return {
        x: getRandomInt(radius, width - radius),
        y: getRandomInt(radius, height - radius)
    };
});

// add svg circles
var circles = d3.select("svg")
    .append("g")
    .attr("class", "circles")
    .selectAll("circle")
    .data(circle_data)
    .enter()
    .append("circle")
    .attr("cx", function(d) {return d.x})
    .attr("cy", function(d) {return d.y})
    .attr("r", radius)
    .attr("fill", "pink");

// return position, or min or max if position exceeds either boundary
function boundaries(position, min, max) {
    if (position < min) {
        return min;   
    } else if (position > max) {
        return max;
    } else {
        return position;
    }
}

// create drag handler
// only has drag handler, which triggers on hold of mouse button
// start and end handlers trigger on click and release respectively
var drag_handler = d3.drag()
    .on("drag", function(d) {
        d3.select(this) // a d3.event object created on a drag event
            .attr("cx", d.x = boundaries(d3.event.x, radius, width - radius))
            .attr("cy", d.y = boundaries(d3.event.y, radius, height - radius));
    });

drag_handler(circles);

</script>
